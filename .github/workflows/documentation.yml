name: Documentation

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/**'
      - 'src/**'
      - 'inc/**'

jobs:
  # Doxygen ë¬¸ì„œ ìƒì„± (í–¥í›„ êµ¬í˜„)
  generate-docs:
    name: Generate API Documentation
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Install Doxygen
      run: |
        sudo apt-get update
        sudo apt-get install -y doxygen graphviz
        
    - name: Check for Doxyfile
      run: |
        if [ -f Doxyfile ]; then
          echo "Doxyfile found, generating documentation..."
          doxygen Doxyfile
        else
          echo "Doxyfile not found yet. Will be added in Phase 1."
        fi
      continue-on-error: true
        
    - name: Upload documentation
      if: success()
      uses: actions/upload-artifact@v4
      with:
        name: api-documentation
        path: docs/api/
      continue-on-error: true
        
  # ë¬¸ì„œ ë§í¬ í™•ì¸
  check-links:
    name: Check Documentation Links
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Check internal links
      run: |
        echo "Checking internal documentation links..."
        # ê°„ë‹¨í•œ ë§í¬ ì²´í¬ (í–¥í›„ ê°œì„ )
        grep -r "\[.*\](.*\.md)" docs/ || echo "No markdown links found"
        
  # ë¬¸ì„œ í†µê³„
  docs-stats:
    name: Documentation Statistics
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Count documentation
      run: |
        echo "ğŸ“Š Documentation Statistics"
        echo "=========================="
        echo "Total markdown files: $(find docs -name '*.md' | wc -l)"
        echo "Total lines: $(find docs -name '*.md' -exec cat {} \; | wc -l)"
        echo ""
        echo "Files:"
        find docs -name '*.md' -exec basename {} \;
